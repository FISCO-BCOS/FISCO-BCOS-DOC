# v3.2.3

#### New

* [New features feature to enable specific bug fixes and new features](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3749)
* [Add Light Node to Obtain Information Interface of All P2P Nodes](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3775)

#### Modify

* [Modify the core module log level to reduce unnecessary error and warning logs](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3787)
* [CI check set openjdk version to 1.8.0.345](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3783)
* [Modify the consensus node to print the log when the block lags behind the highest block](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3744)

#### Repair

* [MemoryStorage::getTxsHash interface lock, improve stability](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3789)
* [Migrating keyage fixes in version 3.4.0](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3702)
* [Improve the logic of trading pools to clean up failed transactions and improve stability](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3774)
* [Perfect permission getMethodAuth interface parameter is the case where there is no contract](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3823)
* [Perfect getBlockByNumber Interface for Light Nodes in State Secret Mode](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3750)
* [Improve the light node getAbi interface to improve stability](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3768)
* [Fix clean package transaction logic](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3678)
* [Fix the problem that the synchronization block may be deadlocked](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3751)
* [Fix the problem that transaction rollbacks only roll back one layer of cross-contract calls](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3620)
* [Fix duplicate packaging for transactions that exist in the transaction pool and are not set to be packaged](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3755)
* [Fixed issue where consensus checkPoint timing was not reset](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3760)
* [Fix non-linear block packing time caused by timing logic not comparing thresholds at initialization](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3776)
* [Fix long lock wait when synchronizing blocks](https://github.com/FISCO-BCOS/FISCO-BCOS/pull/3807)

#### Upgrade Description

* Upgrade Node Executable

  Effect: fix the bug, and bring stability, performance improvement

  Operation: Stop the node service, upgrade the node executable to the current version, and restart the node service

  Note: it is recommended to gradually replace the executable program for gray scale upgrade

  Version supported for upgrade: v3.0.0+

* Upgrade chain data version

  Effect: Use the latest features of the current version

  Operation: first complete the upgrade of all node executable programs, and then refer to the [document](https://fisco-bcos-doc.readthedocs.io/zh_CN/latest/docs/introduction/change_log/3_2_1.html#id5)
  Send transaction upgrade chain data version to v3.2.3

  Note: Be sure to back up all the ledger data of the original node. If the upgrade fails due to an error, the original data can be rolled back to the status before the upgrade
  Version supported for upgrade: v3.0.0+

* Component compatibility

  Please refer to [Full Description](https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/compatibility.html#fisco-bcos-v3-2-2)

|            | Recommended Version| Minimum Version| Description|
|------------|-------------|---------------------|-------------------|
| WeBASE     | 3.0.2       | 3.0.2               |                   |
| WeIdentity | v3.0.0-rc.1 | v3.0.0-rc.1         |                   |
| Console    | 3.2.0       | 3.0.0               |                   |
| Java SDK   | 3.2.2       | 3.0.0               |                   |
| CPP SDK    | 3.2.2       | 3.0.0               |                   |
| Solidity   | 0.8.11      | Minimum 0.4.25, maximum 0.8.11| The compiler (console) needs to be downloaded according to the contract version|
| WBC-Liquid | 1.0.0-rc3   | 1.0.0-rc3           |                   |

#### Upgrade Method

This operation only supports upgrading version 3.x to this version, and does not support upgrading version 3.0-rc or 2.x。

##### Query data compatibility version number (compatibility _ version)

Use [console](https://fisco-bcos-doc.readthedocs.io/zh_CN/latest/docs/operation_and_maintenance/console/console_commands.html#getsystemconfigbykey)
Query, such as the current version returned is 3.0.0

``` 
[group0]: /apps>  getSystemConfigByKey compatibility_version
3.0.0
```

##### Replace Node Binary

Need to be**All Nodes**
Gradually replace the binary with the current version。In order not to affect the business, the replacement process can be done in grayscale, replacing and restarting nodes one by one。During the replacement process, the current chain continues to execute with the logic of the old data-compatible version number。After the binary replacement of all nodes is completed and restarted, you need to use the console to modify the data compatibility version number to the current version。

##### Set the data compatibility version number (compatibility _ version)

Use [console](https://fisco-bcos-doc.readthedocs.io/zh_CN/latest/docs/operation_and_maintenance/console/console_commands.html#setsystemconfigbykey)
Set the data compatibility version number. For example, the current version is 3.2.0。

```
[group0]: /apps>  setSystemConfigByKey compatibility_version 3.2.0
{
    "code":0,
    "msg":"success"
}

Note: If the permission governance function is enabled, you need to use the setSysConfigProposal command
```

Set successfully, query again, the current version has been upgraded to 3.2.0

``` 
[group0]: /apps>  getSystemConfigByKey compatibility_version
3.2.0
```

The current chain has been upgraded, so far,**The chain continues to run with new logic**and supports new features。

